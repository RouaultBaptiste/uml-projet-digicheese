@startuml
title DIGICHEESE — Schéma global (fonctionnel) — Gestion des colis
skinparam shadowing false
left to right direction
skinparam componentStyle rectangle

' =========================
' Acteurs
' =========================
actor "Opérateur colis" as OpColis
actor "Opérateur stock" as OpStock
actor "Administrateur\n(profils & statistiques)" as Admin

' =========================
' Système
' =========================
rectangle "Système DIGICHEESE" as SYS {

  [Gestion clients] as FClients
  [Gestion commandes\n& colis] as FCmd
  [Exports / impressions\n(bons, listes, mailing)] as FExport
  [Emails\n(notification/suivi)] as FMail

  [Authentification\n+ gestion des profils] as FAuth
  [Objets & stocks] as FStock
  [Paramétrage\n(emballages, règles,\ntranches tarifs, référentiels)] as FAdmin

  [Conditionnement\n(règles min/max)] as FPack
  [Affranchissement\n(poids -> tarif)] as FPost
  [Suivi colis\n(Lettre suivie)] as FTrack

  [Statistiques\n(mois/année)] as FStats
  [Historique\n(statuts, événements)] as FHist
}

' =========================
' Externe
' =========================
cloud "La Poste\n(Suivi Lettre suivie)" as Poste

' =========================
' Interactions Acteurs -> Fonctions
' =========================
OpColis --> FAuth
OpColis --> FClients
OpColis --> FCmd
OpColis --> FPack
OpColis --> FPost
OpColis --> FTrack
OpColis --> FHist
OpColis --> FExport
OpColis --> FMail
OpColis --> FStats

OpStock --> FAuth
OpStock --> FStock

Admin --> FAuth
Admin --> FAdmin
Admin --> FStats

' =========================
' Liens fonctionnels (logique métier)
' =========================
FCmd --> FPack : préparer colis
FPack --> FPost : calcul poids
FPost --> FTrack : associer n° suivi

FCmd --> FHist : mise à jour statuts
FTrack --> FHist : tracer événements
FStats --> FHist : exploite données

' =========================
' Interaction externe
' =========================
FTrack --> Poste : n° suivi / consultation

note right of FStats
Les statistiques sont accessibles
selon le profil (ex : Admin / Responsable).
end note
@enduml